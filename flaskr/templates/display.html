<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8" />
<!--==============レイアウトを制御する独自のCSSを読み込み===============-->
<link rel="stylesheet" type="text/css" href="https://coco-factory.jp/ugokuweb/wp-content/themes/ugokuweb/data/reset.css">
<link rel="stylesheet"  type="text/css" href="/static/css/display.css">
<link rel="stylesheet"   type="text/css" href="/static/css/back.css">
<link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
<script defer src="https://pyscript.net/alpha/pyscript.js"></script>
</head>
<div class="bg_pattern Paper_v2"></div>
<div class="section">
<style>
  #example{
      margin: auto;
  }
</style>
<h2>分析結果 見たいものをクリックしてね!</h2>
<div>

  <ul class="accordion-area">
    <li>
      <section>

        <h3 class="title">得点率</h3>
        <div class="box">
          {% set ns = namespace(score_count=0) %}
          {% for score_rate_players in summary_score_rate %}
            {% if ns.score_count == 0 %}
              <p class="score-text">Total</p>
            {% else %}
              <p class="score-text">ゲーム{{ ns.score_count }}</p>
            {% endif %}
            <div class="score-outer-wrap">
              <p>プレイヤー1の得点率</p>
              <div class="score-inner-wrap">
                <div class="score-area">
                  {{ score_rate_players[0][0] | safe }}
                </div>
                <div class="score-area">
                  {{ score_rate_players[0][1] | safe }}
                </div>
              </div>
              <p>プレイヤー2の得点率</p>
              <div class="score-inner-wrap">
                <div class="score-area">
                  {{ score_rate_players[1][0] | safe }}
                </div>
                <div class="score-area">
                  {{ score_rate_players[1][1] | safe }}
                </div>
              </div>
            </div>
            {% set ns.score_count = ns.score_count + 1 %}
          {% endfor %}
        </div>

      </section>
    </li>
    <li>
      <section>
        <h3 class="title">得点表</h3>

        <div class="box">
          <div>

            {% set ns = namespace(num=0) %} {# 最初のゲームのためにnumを1に初期化 #}
            {% set ns1 = namespace(game_num=1) %} {# 最初のゲームのためにgame_numを1に初期化 #}
            {% for table in df_score_list %}
              <p>{{ ns1.game_num  }}ゲーム</p>
              <table border="3">
                {% for row in table %}
                  <tr>
                    <th>
                      {% if ns.num % 2 == 0 %}
                        {{ first }}
                      {% else %}
                        {{ second }}
                      {% endif %}
                      {% set ns.num = ns.num + 1 %}
                      {% for item in row %}
                        <td>{{ item }}</td>
                      {% endfor %}
                    </th>
                  </tr>
                  <br>
                {% endfor %}
                {% set ns1.game_num = ns1.game_num + 1 %}
              </table>
              <br>

              <br> {# 追加：改行を挿入してエラーを回避 #}
            {% endfor %}
          </div>
        </div>
      </section>

    </li>
    <li>
        <section>
          <h3 class="title">サービスの第2バウンド位置のコース図</h3>
          <div class="box">
            <p>1ゲーム目</p>
            <p><img src="./static/images/plot0_f_{{ id }}.png"></p>
            <p><img src="./static/images/plot0_s_{{ id }}.png"></p>
            <p>2ゲーム目</p>
            <p><img src="./static/images/plot1_f_{{ id }}.png"></p>
            <p><img src="./static/images/plot1_s_{{ id }}.png"></p>
            <p>3ゲーム目</p>
            <p><img src="./static/images/plot2_f_{{ id }}.png"></p>
            <p><img src="./static/images/plot2_s_{{ id }}.png"></p>
            <p>4ゲーム目</p>
            <p><img src="./static/images/plot3_f_{{ id }}.png"></p>
            <p><img src="./static/images/plot3_s_{{ id }}.png"></p>
            <p>5ゲーム目</p>
            <p><img src="./static/images/plot4_f_{{ id }}.png"></p>
            <p><img src="./static/images/plot4_s_{{ id }}.png"></p>
          </div>
        </section>

      </li>
      <li>
        <section>

          <h3 class="title">打法出現率</h3>
          <div class="box">
            {% set ns = namespace(score_count=0) %}
            {% for score_method_rate_players in summary_score_method_rate %}
              {% if ns.score_count == 0 %}
                <p class="score-text">Total</p>
              {% else %}
                <p class="score-text">ゲーム{{ ns.score_count }}</p>
              {% endif %}
              <div class="score-outer-wrap">
                <p>プレイヤー1の打法出現率</p>
                <div class="score-inner-wrap">
                  <div class="score-area">
                    {{ score_method_rate_players[0][0] | safe }}
                  </div>
                  <div class="score-area">
                    {{ score_method_rate_players[0][1] | safe }}
                  </div>
                </div>
                <p>プレイヤー2の打法出現率</p>
                <div class="score-inner-wrap">
                  <div class="score-area">
                    {{ score_method_rate_players[1][0] | safe }}
                  </div>
                  <div class="score-area">
                    {{ score_method_rate_players[1][1] | safe }}
                  </div>
                </div>
              </div>
              {% set ns.score_count = ns.score_count + 1 %}
            {% endfor %}
          </div>
          
        </section>
      </li>
  </ul>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="/static/js/display.js"></script>

</div>
</body>
<input class="button" type="button" onclick="location.href='{{ url_for('index')}}'" value="データベースへ">
</div>
</html>
